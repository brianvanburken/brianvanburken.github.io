<!DOCTYPE html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:,"><style>html{background:#0b0e14;color:#fff}body{font-family:Avenir Next,Open Sans,Helvetica,sans-serif;font-size:1.125rem;margin:1.5rem auto;max-width:70ch;padding:0 1.5rem}article,code,footer,h1,h2,h3,p,pre{line-height:1.5rem;margin:1.5rem 0}h1{font-size:2.5rem;line-height:3rem}p{text-align:justify}img{max-width:100%}h2{margin-top:3rem}a,a code{color:#fa3}a:visited{color:#ff9500}a:focus,a:hover{color:#ffbf66}footer{border-top:1px solid #bfbdb6;padding-top:1.5rem}code,pre{font-size:.875rem;word-break:normal;word-spacing:normal;word-wrap:normal;background:#0b0e14;border-radius:.375rem;color:#bfbdb6;hyphens:none}pre{overflow:auto;padding:1.5rem}p code{line-height:1;margin:0 2px;outline:3px solid #0b0e14}@media (prefers-color-scheme:light){html{background:#fff;color:#0b0e14}}.c{color:#59c2ff}.d{color:#aad94c}.f{color:#d2a6ff}.e{color:#95e6cb}</style><link type="application/atom+xml" rel="alternate" href="https://brianvanburken.nl/feed.xml" title="Brian van Burken"><title>Flatten a directory on Unix systems | Brian van Burken</title><meta name="generator" content="Jekyll v4.4.1"><meta property="og:title" content="Flatten a directory on Unix systems"><meta property="og:locale" content="en_US"><meta name="description" content="When cleaning up a bit on my computer, I wanted to flatten a directory structure. Not wanting to move everything by hand, I searched for a way to automate it. On macOS and Linux, there is a command find that lets you find files deeply nested."><meta property="og:description" content="When cleaning up a bit on my computer, I wanted to flatten a directory structure. Not wanting to move everything by hand, I searched for a way to automate it. On macOS and Linux, there is a command find that lets you find files deeply nested."><link rel="canonical" href="https://brianvanburken.nl/flatten-directory-on-unix/"><meta property="og:url" content="https://brianvanburken.nl/flatten-directory-on-unix/"><meta property="og:site_name" content="Brian van Burken"><meta property="og:type" content="article"><meta property="article:published_time" content="2023-01-15T00:00:00+00:00"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Flatten a directory on Unix systems"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-30T15:07:32+00:00","datePublished":"2023-01-15T00:00:00+00:00","description":"When cleaning up a bit on my computer, I wanted to flatten a directory structure. Not wanting to move everything by hand, I searched for a way to automate it. On macOS and Linux, there is a command find that lets you find files deeply nested.","headline":"Flatten a directory on Unix systems","mainEntityOfPage":{"@type":"WebPage","@id":"https://brianvanburken.nl/flatten-directory-on-unix/"},"url":"https://brianvanburken.nl/flatten-directory-on-unix/"}</script><p><a href="/" title="Overview of all my writings">Writings</a> | <a href="https://github.com/brianvanburken" title="Visit my GitHub profile" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://linkedin.com/in/brianvanburken" title="Visit my LinkedIn profile" target="_blank" rel="noopener noreferrer">LinkedIn</a><article itemscope itemtype="http://schema.org/BlogPosting"><h1 itemprop="name headline">Flatten a directory on Unix systems</h1><section itemprop="articleBody"><p>When cleaning up a bit on my computer, I wanted to flatten a directory structure. Not wanting to move everything by hand, I searched for a way to automate it. On macOS and Linux, there is a command <a href="https://man7.org/linux/man-pages/man1/find.1.html" target="_blank" rel="noopener noreferrer"><code>find</code></a> that lets you find files deeply nested.<h2 id="moving-files">Moving files</h2><p>The command above finds all nested files with at least one directory down and then passes the arguments to the move <a href="https://man7.org/linux/man-pages/man1/mv.1.html" target="_blank" rel="noopener noreferrer"><code>mv</code></a> command. Here the <code>/path/to/directory</code> directory is the directory we want to flatten.<pre tabindex="0"><code><span class="c">find</span><span class="d"> /path/to/directory</span><span class="e"> -mindepth</span><span class="f"> 2</span><span class="e"> -type</span><span class="d"> f</span><span class="e"> -exec</span><span class="d"> mv '{}' /path/to/directory</span><span class="e"> \;</span>
</code></pre><p>With <code>-type f</code>, we only find files in the given directory where we want it to look at least from a depth of two. The move will overwrite files with the same name. To control which one to overwrite or not, add <code>-i</code> to the <code>mv</code> command to interactively approve overwrites or <code>-f</code> to force overwrites.<h3 id="example">Example</h3><pre tabindex="0"><code>/path/to/directory
|-- subdir1/
|   |-- subsubdir1/
|   |   |-- file1.txt
|   |   |-- file2.txt
|   |-- subsubdir2/
|       |-- file3.txt
|-- subdir2/
    |-- file4.txt
    |-- subsubdir3/
        |-- file5.txt
        |-- file6.txt
</code></pre><p>After running the command, the directory will look like this:<pre tabindex="0"><code>/path/to/directory
|-- subdir1/
|   |-- subsubdir1/
|   |-- subsubdir2/
|-- subdir2/
|   |-- subsubdir3/
|-- file1.txt
|-- file2.txt
|-- file3.txt
|-- file4.txt
|-- file5.txt
|-- file6.txt
</code></pre><h2 id="cleaning-up">Cleaning up</h2><p>After moving, I still had a lot of empty directories. Deleting them by hand would be little work, but what if I could also automate it? We can use the <code>find</code> command again to remove all directories using <code>-delete</code>. With <code>-empty</code>, we ensure that we do not delete non-empty directories when something goes wrong. The command also needs the <code>-depth</code> and <code>-mindepth 1</code> flags to recursively find the deepest directories first, as there are possible subdirectories in it and thus not empty.<pre tabindex="0"><code><span class="c">find</span><span class="d"> /path/to/directory</span><span class="e"> -type</span><span class="d"> d</span><span class="e"> -depth -mindepth</span><span class="f"> 1</span><span class="e"> -empty -delete</span>
</code></pre><p>It will give us a directory with all files in the root and no subdirectories.<pre tabindex="0"><code>/path/to/directory
|-- file1.txt
|-- file2.txt
|-- file3.txt
|-- file4.txt
|-- file5.txt
|-- file6.txt
</code></pre><h2 id="combining-both">Combining both</h2><p>We can combine both commands to flatten a directory and clean it up in succession. The following command is a combination of both steps at once. Using <code>-o</code> means that <code>find</code> will only execute the second command if the first fails.<pre tabindex="0"><code><span class="c">find</span><span class="d"> /path/to/directory</span><span class="e"> -mindepth</span><span class="f"> 2</span><span class="e"> -type</span><span class="d"> f</span><span class="e"> -exec</span><span class="d"> mv '{}' /path/to/directory</span><span class="e"> \; \
  -o -type</span><span class="d"> d</span><span class="e"> -depth -mindepth</span><span class="f"> 1</span><span class="e"> -empty -delete</span>
</code></pre></section><footer>Published on <time datetime="2023-01-15T00:00:00+00:00" itemprop="datePublished">2023-01-15 </time><br>Tags: <a href="/tags/#shell" title="See all post for Shell">Shell</a>, <a href="/tags/#macos" title="See all post for macOS">macOS</a><br>Source <a href="https://github.com/brianvanburken/brianvanburken.github.io/tree/master/_posts/2023-01-15-flatten-directory-on-unix.md" target="_blank" rel="noopener noreferrer">on Github</a></footer></article><script data-goatcounter="https://brianvanburken.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script><noscript><img src="https://brianvanburken.goatcounter.com/count?p=/flatten-directory-on-unix/"></noscript>