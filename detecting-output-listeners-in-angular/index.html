<!DOCTYPE html><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/atom+xml title="RSS Feed" href=https://brianvanburken.nl/feed.xml><title>Detecting Output Listeners in Angular | Brian van Burken</title><meta property=og:title content="Detecting Output Listeners in Angular"><meta name=description content="Detecting listeners on an EventEmitter in an Angular component."><meta property=og:description content="Detecting listeners on an EventEmitter in an Angular component."><meta property=og:type content=article><meta property=og:url content=https:&#x2F;&#x2F;brianvanburken.nl&#x2F;detecting-output-listeners-in-angular&#x2F;><meta property=og:site_name content="Brian van Burken"><link rel=canonical href=https:&#x2F;&#x2F;brianvanburken.nl&#x2F;detecting-output-listeners-in-angular&#x2F;><meta property=article:published_time content=2021-10-25T00:00:00+00:00><style>html{color:#fff;background:#0b0e14}@media (prefers-color-scheme:light){html{color:#0b0e14;background:#fff}}body{font-family:"Avenir Next","Open Sans",Helvetica,sans-serif;font-size:1.125rem;max-width:70ch;margin:1.5rem auto;padding:0 1.5rem}article,code,footer,h1,p,pre{margin:1.5rem 0;line-height:1.5rem}h1{font-size:2.5rem;line-height:3rem}p{text-align:justify}img{max-width:100%}a,a code{color:#fa3}a:visited{color:#ff9500}a:focus,a:hover{color:#ffbf66}footer{border-top:1px solid #bfbdb6;padding-top:1.5rem}code,pre{font-size:.875rem;word-spacing:normal;word-break:normal;word-wrap:normal;hyphens:none;color:#bfbdb6;background:#0b0e14;border-radius:.375rem}pre{overflow:auto;padding:1.5rem}p code{line-height:1;outline:3px solid #0b0e14;margin:0 2px}.b{color:#ff8f40}.h{color:#59c2ff}.c{color:#bfbdb6}.i{color:#f29668}.j{color:#39bae6}.e{color:#bfbdb6b3}.d{color:#aad94c}.g{color:#ffb454}.k{color:#d2a6ff}.f{color:#e6c08a}</style><p><a href=/ title="Overview of all my writings">Writings</a> | <a href=https://github.com/brianvanburken title="Visit my GitHub profile" target=_blank rel="noopener noreferrer">GitHub</a> | <a href=https://linkedin.com/in/brianvanburken title="Visit my LinkedIn profile" target=_blank rel="noopener noreferrer">LinkedIn</a><article itemscope itemtype=http://schema.org/BlogPosting><h1 itemprop="name headline">Detecting Output Listeners in Angular</h1><section itemprop=articleBody><p>Sometimes you want to check if you have listeners attached to your <code>@Output</code> for your component to behave differently. It is possible to take the current <code>EventEmitter</code> and get the number of listeners back. In this blog post, I will exploit that to change the behavior of a component.<p>Well, let's start with a new Angular project and generate a new component called <code>ExampleComponent</code>. We will add a simple message that shows that we are static, which means no listeners are attached or interactive.<pre><code><span class=a><span class=b>import</span><span class=c> { Component } </span><span class=b>from</span><span class=d> "@angular/core"</span><span class=e>;</span></span>

<span class=a><span class=f>@</span><span class=g>Component</span><span class=c>({</span></span>
<span class=a><span class=c>  selector</span><span class=e>:</span><span class=d> "app-example"</span><span class=e>,</span></span>
<span class=a><span class=c>  template</span><span class=e>:</span><span class=d> `&#x3C;span>I'm a static message&#x3C;/span>`</span><span class=e>,</span></span>
<span class=a><span class=c>})</span></span>
<span class=a><span class=b>export class</span><span class=h> ExampleComponent</span><span class=c> {}</span></span>
</code></pre><p>Next, we will add an EventEmitter with the name <code>myEvent</code> to the component to which other components can attach themselves.<pre><code><span class=a><span class=b>import</span><span class=c> { Component</span><span class=e>,</span><span class=c> EventEmitter</span><span class=e>,</span><span class=c> Output } </span><span class=b>from</span><span class=d> "@angular/core"</span><span class=e>;</span></span>

<span class=a><span class=f>@</span><span class=g>Component</span><span class=c>({</span></span>
<span class=a><span class=c>  selector</span><span class=e>:</span><span class=d> "app-example"</span><span class=e>,</span></span>
<span class=a><span class=c>  template</span><span class=e>:</span><span class=d> `&#x3C;span>I'm a static message&#x3C;/span>`</span><span class=e>,</span></span>
<span class=a><span class=c>})</span></span>
<span class=a><span class=b>export class</span><span class=h> ExampleComponent</span><span class=c> {</span></span>
<span class=a><span class=f>  @</span><span class=g>Output</span><span class=c>() </span><span class=b>public</span><span class=c> myEvent </span><span class=i>= new</span><span class=g> EventEmitter</span><span class=c>&#x3C;</span><span class=j>void</span><span class=c>>()</span><span class=e>;</span></span>
<span class=a><span class=c>}</span></span>
</code></pre><p>Now we can use this to check if we have attached listeners to let our component react to it. We will add <code>ngOnInit</code> to our component in which we check for listeners and set a flag on our component indicating that we have listeners. When another component listens to our event like so <code>&lt;app-example (myEvent)="handle($event)"&gt;&lt;/app-example&gt;</code>, we check if an observer is attached and set our flag if we have any listeners.<pre><code><span class=a><span class=b>import</span><span class=c> { Component</span><span class=e>,</span><span class=c> EventEmitter</span><span class=e>,</span><span class=c> OnInit</span><span class=e>,</span><span class=c> Output } </span><span class=b>from</span><span class=d> "@angular/core"</span><span class=e>;</span></span>

<span class=a><span class=f>@</span><span class=g>Component</span><span class=c>({</span></span>
<span class=a><span class=c>  selector</span><span class=e>:</span><span class=d> "app-example"</span><span class=e>,</span></span>
<span class=a><span class=c>  template</span><span class=e>:</span><span class=d> `&#x3C;span>I'm a static message&#x3C;/span>`</span><span class=e>,</span></span>
<span class=a><span class=c>})</span></span>
<span class=a><span class=b>export class</span><span class=h> ExampleComponent</span><span class=b> implements</span><span class=j> OnInit</span><span class=c> {</span></span>
<span class=a><span class=f>  @</span><span class=g>Output</span><span class=c>() </span><span class=b>public</span><span class=c> myEvent </span><span class=i>= new</span><span class=g> EventEmitter</span><span class=c>&#x3C;</span><span class=j>void</span><span class=c>>()</span><span class=e>;</span></span>

<span class=a><span class=b>  public</span><span class=c> isInteractive </span><span class=i>=</span><span class=k> false</span><span class=e>;</span></span>

<span class=a><span class=b>  public</span><span class=g> ngOnInit</span><span class=c>() {</span></span>
<span class=a><span class=j>    this</span><span class=i>.</span><span class=c>isInteractive </span><span class=i>=</span><span class=j> this</span><span class=i>.</span><span class=c>myEvent</span><span class=i>.</span><span class=c>observers</span><span class=i>.</span><span class=c>length </span><span class=i>></span><span class=k> 0</span><span class=e>;</span></span>
<span class=a><span class=c>  }</span></span>
<span class=a><span class=c>}</span></span>
</code></pre><p>Now that we have our flag, we can finish up our component and swap our static message with the interactive one. Below we have a fully functional component that changes text based on listeners.<pre><code><span class=a><span class=b>import</span><span class=c> { Component</span><span class=e>,</span><span class=c> EventEmitter</span><span class=e>,</span><span class=c> OnInit</span><span class=e>,</span><span class=c> Output } </span><span class=b>from</span><span class=d> "@angular/core"</span><span class=e>;</span></span>

<span class=a><span class=f>@</span><span class=g>Component</span><span class=c>({</span></span>
<span class=a><span class=c>  selector</span><span class=e>:</span><span class=d> "app-example"</span><span class=e>,</span></span>
<span class=a><span class=c>  template</span><span class=e>:</span><span class=d> `</span></span>
<span class=a><span class=d>    &#x3C;span *ngIf="!isInteractive">I'm a static message.&#x3C;/span></span></span>
<span class=a><span class=d>    &#x3C;span *ngIf="isInteractive">I'm an interactive message.&#x3C;/span></span></span>
<span class=a><span class=d>  `</span><span class=e>,</span></span>
<span class=a><span class=c>})</span></span>
<span class=a><span class=b>export class</span><span class=h> ExampleComponent</span><span class=b> implements</span><span class=j> OnInit</span><span class=c> {</span></span>
<span class=a><span class=f>  @</span><span class=g>Output</span><span class=c>() </span><span class=b>public</span><span class=c> myEvent </span><span class=i>= new</span><span class=g> EventEmitter</span><span class=c>&#x3C;</span><span class=j>void</span><span class=c>>()</span><span class=e>;</span></span>

<span class=a><span class=b>  public</span><span class=c> isInteractive </span><span class=i>=</span><span class=k> false</span><span class=e>;</span></span>

<span class=a><span class=b>  public</span><span class=g> ngOnInit</span><span class=c>()</span><span class=i>:</span><span class=j> void</span><span class=c> {</span></span>
<span class=a><span class=j>    this</span><span class=i>.</span><span class=c>isInteractive </span><span class=i>=</span><span class=j> this</span><span class=i>.</span><span class=c>myEvent</span><span class=i>.</span><span class=c>observers</span><span class=i>.</span><span class=c>length </span><span class=i>></span><span class=k> 0</span><span class=e>;</span></span>
<span class=a><span class=c>  }</span></span>
<span class=a><span class=c>}</span></span>
</code></pre></section><footer>Published on <time datetime=2021-10-25T00:00:00 itemprop=datePublished>2021-10-25</time><br>Tags: <a href=/tags/#angular title="See all posts for Angular">Angular</a>, <a href=/tags/#eventemitter title="See all posts for EventEmitter">EventEmitter</a>, <a href=/tags/#typescript title="See all posts for TypeScript">TypeScript</a><br>Source <a href=https:&#x2F;&#x2F;github.com&#x2F;brianvanburken&#x2F;brianvanburken.github.io&#x2F;tree&#x2F;master&#x2F;content/detecting-output-listeners-in-angular.md target=_blank rel="noopener noreferrer" title="View post source on Github">on Github</a></footer></article><script data-goatcounter=https://brianvanburken.goatcounter.com/count async src=https://gc.zgo.at/count.js></script><noscript><img src="https://brianvanburken.goatcounter.com/count?p=/detecting-output-listeners-in-angular/"></noscript>