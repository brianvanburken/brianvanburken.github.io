<!DOCTYPE html><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="data:,"><style>html{background:#0b0e14;color:#fff}body{font-family:Avenir Next,Open Sans,Helvetica,sans-serif;font-size:1.125rem;margin:1.5rem auto;max-width:70ch;padding:0 1.5rem}article,code,footer,h1,p,pre{line-height:1.5rem;margin:1.5rem 0}h1{font-size:2.5rem;line-height:3rem}p{text-align:justify}img{max-width:100%}a{color:#fa3}a:visited{color:#ff9500}a:focus,a:hover{color:#ffbf66}footer{border-top:1px solid #bfbdb6;padding-top:1.5rem}code,pre{font-size:.875rem;word-break:normal;word-spacing:normal;word-wrap:normal;background:#0b0e14;border-radius:.375rem;color:#bfbdb6;hyphens:none}pre{overflow:auto;padding:1.5rem}p code{line-height:1;margin:0 2px;outline:3px solid #0b0e14}@media (prefers-color-scheme:light){html{background:#fff;color:#0b0e14}}.c{color:#c594c5}.d{color:#f26d78}.e{color:#7fd962}</style><link type="application/atom+xml" rel="alternate" href="https://brianvanburken.nl/feed.xml" title="Brian van Burken"><title>Manually editing chunks in git add –patch | Brian van Burken</title><meta name="generator" content="Jekyll v4.4.1"><meta property="og:title" content="Manually editing chunks in git add –patch"><meta property="og:locale" content="en_US"><meta name="description" content="Using git add --patch, git can stage smaller chunks of code for creating more atomic commits. The interactive mode provides chunks, and each can be staged using y or rejected using n. But sometimes, a more granular chunk is needed, and that is where s and e come into play. Where s tries to split it into smaller chunks, it might not always work wanted. You can then use e to manually edit a patch."><meta property="og:description" content="Using git add --patch, git can stage smaller chunks of code for creating more atomic commits. The interactive mode provides chunks, and each can be staged using y or rejected using n. But sometimes, a more granular chunk is needed, and that is where s and e come into play. Where s tries to split it into smaller chunks, it might not always work wanted. You can then use e to manually edit a patch."><link rel="canonical" href="https://brianvanburken.nl/git-add-patch-split-chunks/"><meta property="og:url" content="https://brianvanburken.nl/git-add-patch-split-chunks/"><meta property="og:site_name" content="Brian van Burken"><meta property="og:type" content="article"><meta property="article:published_time" content="2023-01-04T00:00:00+00:00"><meta name="twitter:card" content="summary"><meta property="twitter:title" content="Manually editing chunks in git add –patch"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2025-10-30T15:07:32+00:00","datePublished":"2023-01-04T00:00:00+00:00","description":"Using git add --patch, git can stage smaller chunks of code for creating more atomic commits. The interactive mode provides chunks, and each can be staged using y or rejected using n. But sometimes, a more granular chunk is needed, and that is where s and e come into play. Where s tries to split it into smaller chunks, it might not always work wanted. You can then use e to manually edit a patch.","headline":"Manually editing chunks in git add –patch","mainEntityOfPage":{"@type":"WebPage","@id":"https://brianvanburken.nl/git-add-patch-split-chunks/"},"url":"https://brianvanburken.nl/git-add-patch-split-chunks/"}</script><p><a href="/" title="Overview of all my writings">Writings</a> | <a href="https://github.com/brianvanburken" title="Visit my GitHub profile" target="_blank" rel="noopener noreferrer">GitHub</a> | <a href="https://linkedin.com/in/brianvanburken" title="Visit my LinkedIn profile" target="_blank" rel="noopener noreferrer">LinkedIn</a><article itemscope itemtype="http://schema.org/BlogPosting"><h1 itemprop="name headline">Manually editing chunks in git add --patch</h1><section itemprop="articleBody"><p>Using <code>git add --patch</code>, git can stage smaller chunks of code for creating more atomic commits. The interactive mode provides chunks, and each can be staged using <code>y</code> or rejected using <code>n</code>. But sometimes, a more granular chunk is needed, and that is where <code>s</code> and <code>e</code> come into play. Where <code>s</code> tries to split it into smaller chunks, it might not always work wanted. You can then use <code>e</code> to <a href="https://git-scm.com/docs/git-add#_editing_patches" target="_blank" rel="noopener noreferrer">manually edit a patch</a>.<p>The desired change in the following example would be only to commit changes around variable <code>z</code>:<pre tabindex="0"><code><span class="c">--- a/main.rs
+++ b/main.rs
@@ -1,5 +1,5 @@</span>
 fn main() {
     let x = 5;
<span class="d">-    let y = 6;
-    let z = 7;</span>
<span class="e">+    let y = 7;
+    let z = 8;</span>
     println!("{} {} {}", x, y, z);
 }
</code></pre><p>We can use the <code>e</code> command to edit the chunk in a text editor manually. To only commit the changes for variable <code>z</code>, we need to remove the line <code>+ let y = 7;</code> and change the <code>-</code> before <code>let y = 6</code> into a space ` `. The patch should then look like this:<pre tabindex="0"><code> fn main() {
     let x = 5;
     let y = 6;
<span class="d">-    let z = 7;</span>
<span class="e">+    let z = 8;</span>
     println!("{} {} {}", x, y, z);
 }
</code></pre><p>After saving and closing the editor, git will stage the modified patch, allowing you to create a commit with only the changes to variable <code>z</code>.</section><footer>Published on <time datetime="2023-01-04T00:00:00+00:00" itemprop="datePublished">2023-01-04 </time><br>Tags: <a href="/tags/#git" title="See all post for Git">Git</a><br>Source <a href="https://github.com/brianvanburken/brianvanburken.github.io/tree/master/_posts/2023-01-04-git-add-patch-split-chunks.md" target="_blank" rel="noopener noreferrer">on Github</a></footer></article><script data-goatcounter="https://brianvanburken.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script><noscript><img src="https://brianvanburken.goatcounter.com/count?p=/git-add-patch-split-chunks/"></noscript>